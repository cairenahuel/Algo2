\documentclass[document.tex]{subfiles}
\begin{document}
%
\begin{proc}{trayectoriaDeLosFrutosIndividualesALargoPlazo}{\Inout trayectorias : \TLista{\TLista{\float}},\\ \In cooperan : \TLista{\bool}, \In apuestas : \TLista{\TLista{\float}}, \In pagos : \TLista{\TLista{\float}}, \In eventos : \TLista{\TLista{\nat}}}{}
\requiere{|trayectorias|=|cooperan|=|apuestas|=|pagos|=|eventos|}
%
\requiere{\paraTodo[unalinea]{i}{\ent}{(enRango(i, |cooperan|) \yLuego (|pagos[i]|=|apuestas[i]| )}}
\requiere{\paraTodo[unalinea]{i}{\ent}{(enRango(i, |cooperan|) \yLuego (|trayectorias[i]|=1 \yLuego trayectorias[i][0]>0)}}
%
%no se que quisiste hacer aca nahue r
%\requiere{\paraTodo[unalinea]{i,k}{\ent}{(enRango(i, |cooperan|), enRango(k, |pagos|) \yLuego (|pagos[i]|, |pagos[i][k]|>0) }}
%
\requiere{\paraTodo[unalinea]{n}{\ent}{(enRango(n, eventos) \yLuego |eventos[n]|>0}}
\requiere{esRectangular(eventos)\yLuego esRectangular(pagos)\yLuego esRectangular(apuestas)}
%
\hfill \\
\asegura{
\paraTodo[unalinea]{p}{\ent}{enRango(p,|eventos[0]|)\yLuego(\paraTodo[unalinea]{i}{\ent}{enRango(i,|cooperan|)}\yLuego \\ trayectorias[i][p+1]=\IfThenElse{cooperan[i]}{ufc(p)}{ufc(p)+gananciaEnP[i]})}}
%
\hfill\\
\aux{cuantoGanaron}{recursos : \TLista{\float}, apuestas : \TLista{\TLista{\float}}, pagos : \TLista{\TLista{\float}}, eventosPaso :  \TLista{\nat}}{\TLista{\float}}{
\\\hspace*{2em}\sum_{i=0}^{|recursos|-1}{\langle recursos[i]\cdot apuestas[i][eventosPaso[i]] \cdot  pagos[i][eventosPaso[i]] \rangle}
}
%
\aux{gananciaEnP}{p: \ent}{\float}{
\\\hspace*{2em}cuantoGanaron(trayectorias^T[p], apuestas, pagos, eventos^T[p])
}
%
\aux{ufc}{p: \ent}{\float}{
\\\hspace*{2em}gananciaEnP(p)/|cooperan|
}
%
%\par{\textbackslash*i es el índice del individuo, p es el paso en el que estamos*\textbackslash}\\
%\aux{cuantoGano}{\In i: \ent, \In p: \ent}{\float}{trayectorias[i][p]*apuestas[i][eventos[i][p]]*pagos[i][eventos[i][p]]}
%\par{\textbackslash*calcula cuanta plata se reparte del fondo común*\textbackslash}\\
%\aux{unidadFondoComun}{\In recursos: \TLista{\float}, \In cooperan: \TLista{\bool}}{\float}{
%\\\hspace*{2em}(\sum_{i=0}^{|recursos|-1} \IfThenElse{cooperan[i]}{recursos[i]}{0})/|recursos|

% \hfill\\
% \texttt{donde $ganaciaEnP=cuantoGanaron(trayectoria^T[p], apuestas, pagos, eventos^T[p])$}
\begin{verbatim}
    donde ufc = unidadFondoComun(gananciaEnP, cooperan)
\end{verbatim}
\end{proc}
\end{document}

%
%Editores={"nahuel":1704240029}
%
\documentclass{article}
\input{AEDmacros}
\begin{document}
%
\section{Introduction}
\begin{proc}{trayectoriaDeLosFrutosIndividualesALargoPlazo}{\Inout trayectorias : \TLista{\TLista{\float}},\\ \In cooperan : \TLista{\bool}, \In apuestas : \TLista{\TLista{\float}}, \In pagos : \TLista{\TLista{\float}}, \In eventos : \TLista{\TLista{\nat}}}{}
\requiere{|trayectorias|=|cooperan|=|apuestas|=|pagos|=|eventos|}

% cada columna de pagos y apuestas representa el índice de un evento.
% por lo tanto, además de igual número de usuarios, deben tener igual número de eventos.
% entonces, tienen mismo número de filas que de columnas.

\requiere{\paraTodo[unalinea]{i}{\ent}{(0 \leq i < individuosLen) \yLuego (|pagos[i]|=|apuestas[i]| )}}
\requiere{\paraTodo[unalinea]{i}{\ent}{(0 \leq i < individuosLen) \yLuego (|trayectorias[i]|=1 \yLuego trayectorias[i][0]>0)}}
\requiere{\paraTodo[unalinea]{i,k}{\ent}{(0 \leq i < individuosLen, 0\leq k < pagosLen) \yLuego (|pagos[i]|, |pagos[i][k]|>0) }}
%tiene que haber almenos una unidad de evento para cada persona
%y creo que tambien deberiamos requerir que todos tengan la misma cantidad de eventos pero no se expresarlo
%EDIT: segun la resolucion que estoy intentando hacer abajo si, tienen que
\requiere{\paraTodo[unalinea]{n}{\ent}{(0 \leq n < |eventos|) \yLuego |eventos[n]|>0}}

\hfill 
\par{\textbackslash*i,p son índices de los individuos y los pasos, respectivamente*\textbackslash}\\
\asegura{
	\paraTodo[unalinea]{i,p}{\ent}{recorreIndividuosPasos(i,p) \yLuego \IfThenElse{cooperan[i]}{trayectorias[i][p]=ufc(p)}{trayectorias[i][p]=ufc(p)}}
}

\hfill 
\par{\textbackslash*i,p son índices de los individuos y los pasos, respectivamente*\textbackslash}\\
\pred{recorreIndividuosPasos}{\In i: \ent, \In p: \ent}{0 \leq i < individuosLen \yLuego 0 \leq p < pasosLen}

\hfill 
\par{\textbackslash*i es el índice del individuo, p es el paso en el que estamos*\textbackslash}\\
\aux{cuantoGano}{\In i: \ent, \In p: \ent}{\float}{trayectorias[i][p]*apuestas[i][eventos[i][p]]*pagos[i][eventos[i][p]]}

\hfill 
\par{\textbackslash*calcula cuanta plata se reparte del fondo común*\textbackslash}\\
\aux{unidadFondoComun}{\In recursos: \TLista{\float}, \In cooperan: \TLista{\bool}}{\float}{
\\\hspace*{2em}(\sum_{i=0}^{|recursos|-1} \IfThenElse{cooperan[i]}{recursos[i]}{0})/|recursos|
}

\textbf{\\ \textbackslash*a partir de aca no usé nada*\textbackslash}\\
\aux{recurso}{n,co,ap,pa,ev}{\float}{\IfThenElse{co[n]}{fondo(n,co,ap,pa,ev)}{(tr[n][TIEMPO-1]*ap[n][ev[n][TIEMPO]*pa[n][ev[n][TIEMPO])+FONDO})}

\aux{obtenerRecursos}{\In p: \ent, \Inout trayectorias : \TLista{\TLista{\float}}}{\float}{
\\\hspace*{2em} res \iff \paraTodo[unalinea]{n}{\ent}{(0 \leq n < |trayectorias|) \yLuego (res = trayectorias[n][p])}
}

\asegura{\paraTodo[unalinea]{n}{\ent}{0 \leq n < |tr| \yLuego setAt(tr,n,\conc{tr[n],recurso})}}
\aux{recurso}{n,co,ap,pa,ev}{\float}{\IfThenElse{co[n]}{fondo(n,co,ap,pa,ev)}{(tr[n][TIEMPO-1]*ap[n][ev[n][TIEMPO]*pa[n][ev[n][TIEMPO])+FONDO})}
%
%siento que todo esto esta mal porque estoy intentando implementar la solucion y no describir lo que quiero que pase
%ignorando ese facto, falta definir bien QUE es el tiempo ( indicio de que algo esta mal )
%
%IMPORTANTE PARA EL TIEMPO: segun el apunte de especificacion del campus se pueden anidar cuantificadores
%forall TIEMPOS forall INDIVIDUOS ta ta ta
%IMPORTANTE PARA LO DE ARRIBA: por eso es necesario que todos tengan la misma cantidad de eventos
%
\textbf{\\
donde individuosLen = cooperan.len \\
donde pasosLen = eventos[0].len \\
donde pagosLen = pagos[0][0].len \\
donde tr=trayectoria\\
donde co=cooperan\\
donde ap=apuestas\\
donde pa=pagos\\
donde ev=eventos\\
}
%hace frio, y estoy lejos de casa
%hace tiempo que estoy sentado sobre esta piedra
\end{proc}
\end{document}
